#!/bin/sh
images_dir="/home/alexis/Documents/Blockchain/groupe08/frontend/public/images"
metadata_dir="./frontend/public/metadata"
counter=1

# Create metadata directory if it doesn't exist
mkdir -p "$metadata_dir"

for image in "$images_dir"/*; do
    [ -f "$image" ] || continue
    image_name=$(basename "$image")
    # Create metadata filename by replacing the image extension with .json
    metadata_file="$metadata_dir/${image_name%.*}.json"
    url="https://blockchain-project-live.vercel.app/images/$image_name"
    
    # Write metadata JSON for the current image with an incremental id field
    cat <<EOF > "$metadata_file"
{
  "name": "$image_name",
  "description": "NFT image $image_name",
  "image": "$url"
}
EOF
done
